{"version":3,"sources":["assets\\Scripts\\PlayerController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PlayerController extends cc.Component {\r\n    private stick: cc.Node = null;\r\n    private isMoving: boolean = false;\r\n\r\n    enableStickCreation() {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.startCreatingStick, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.stopCreatingStick, this);\r\n    }\r\n\r\n    startCreatingStick() {\r\n        this.stick = new cc.Node(\"Stick\");\r\n        this.stick.addComponent(cc.Sprite);\r\n        this.stick.setPosition(this.node.position.add(cc.v3(0, this.node.height / 2, 0)));\r\n        this.stick.parent = this.node.parent;\r\n        this.stick.height = 0;\r\n\r\n        this.schedule(this.growStick, 0.02);\r\n    }\r\n\r\n    growStick() {\r\n        this.stick.height += 10; // Примерная скорость роста\r\n    }\r\n\r\n    stopCreatingStick() {\r\n        this.unschedule(this.growStick);\r\n        this.rotateStick();\r\n    }\r\n\r\n    rotateStick() {\r\n        cc.tween(this.stick)\r\n            .to(0.5, { angle: -90 }, { easing: 'cubicOut' })\r\n            .call(() => {\r\n                // Уведомляем GameController, что палка упала\r\n                cc.systemEvent.emit('stick-fallen', this.stick);\r\n            })\r\n            .start();\r\n    }\r\n\r\n    moveToEndOfStick(stickNode: cc.Node, onComplete: Function) {\r\n        this.isMoving = true;\r\n        const targetPosition = stickNode.position.add(cc.v3(stickNode.width, 0, 0));\r\n        const targetPosition3D = new cc.Vec3(targetPosition.x, targetPosition.y, 0);\r\n\r\n        cc.tween(this.node)\r\n            .to(1, { position: targetPosition3D }, { easing: 'sineInOut' })\r\n            .call(() => {\r\n                this.isMoving = false;\r\n                if (onComplete) onComplete();\r\n            })\r\n            .start();\r\n    }\r\n}\r\n"]}