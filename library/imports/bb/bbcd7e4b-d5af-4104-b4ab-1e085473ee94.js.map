{"version":3,"sources":["assets\\Scripts\\PlatformSpawner.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qCAAoC;AACpC,uCAAkC;AAE5B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA6C,mCAAO;IAApD;QAAA,qEAkDC;QAjDoB,UAAI,GAAW,CAAC,IAAI,CAAC;QAG9B,cAAQ,GAAW,EAAE,CAAC;QAGtB,cAAQ,GAAW,GAAG,CAAC;QAGvB,gBAAU,GAAW,GAAG,CAAC;QAGzB,gBAAU,GAAW,GAAG,CAAC;QAGzB,wBAAkB,GAAW,GAAG,CAAC;QAEjC,kBAAY,GAAa,IAAI,CAAC;;IAgC1C,CAAC;IA9BU,mCAAS,GAAhB,UAAiB,QAAkB;QAC/B,IAAM,WAAW,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,YAAY,CAAC,kBAAQ,CAAC,CAAC;QAClE,IAAI,QAAQ,EAAE;YACV,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC3D,WAAW,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SAClC;aAAM;YACH,IAAI,CAAC,2BAA2B,CAAC,WAAW,CAAC,CAAC;SACjD;QAED,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAEhC,OAAO,WAAW,CAAC,IAAI,CAAC;IAC5B,CAAC;IAGO,qDAA2B,GAAnC,UAAoC,QAAkB;QAClD,IAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QACtF,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC;QAEpC,IAAM,OAAO,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;QACtF,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAE/G,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;QAE9D,QAAQ,CAAC,kBAAkB,EAAE,CAAC;QAE9B,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC;aAClB,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;aAC7F,KAAK,EAAE,CAAC;IACjB,CAAC;IA7CD;QADC,QAAQ;qDACqB;IAG9B;QADC,QAAQ;qDACsB;IAG/B;QADC,QAAQ;uDACwB;IAGjC;QADC,QAAQ;uDACwB;IAGjC;QADC,QAAQ;+DACgC;IAhBxB,eAAe;QADnC,OAAO;OACa,eAAe,CAkDnC;IAAD,sBAAC;CAlDD,AAkDC,CAlD4C,iBAAO,GAkDnD;kBAlDoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["import { Spawner } from \"./Spawner\";\nimport Platform from \"./Platform\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PlatformSpawner extends Spawner {\n    private readonly posY: number = -1100;\n\n    @property\n    private minWidth: number = 50;\n\n    @property\n    private maxWidth: number = 200;\n\n    @property\n    private minXOffset: number = 100;\n\n    @property\n    private maxXOffset: number = 400;\n\n    @property\n    private platformAppearTime: number = 0.5;\n\n    private lastPlatform: Platform = null;\n\n    public spawnNode(position?: cc.Vec2): cc.Node {\n        const newPlatform = this.getOrCreateNode().getComponent(Platform);\n        if (position) {\n            newPlatform.node.setPosition(cc.v2(position.x, this.posY));\n            newPlatform.node.active = true;\n        } else {\n            this.setRandomPlatformAttributes(newPlatform);\n        }\n\n        this.lastPlatform = newPlatform;\n\n        return newPlatform.node;\n    }\n\n\n    private setRandomPlatformAttributes(platform: Platform) {\n        const platformWidth = this.minWidth + Math.random() * (this.maxWidth - this.minWidth);\n        platform.node.width = platformWidth;\n\n        const offsetX = this.minXOffset + Math.random() * (this.maxXOffset - this.minXOffset);\n        const newPositionX = this.lastPlatform ? this.lastPlatform.node.x + this.lastPlatform.node.width + offsetX : 0;\n\n        platform.node.setPosition(cc.v2(newPositionX, this.posY * 2));\n\n        platform.updatePlatformSize();\n\n        cc.tween(platform.node)\n            .to(this.platformAppearTime, { position: cc.v3(newPositionX, -1100) }, { easing: 'cubicOut' })\n            .start();\n    }\n}\n"]}